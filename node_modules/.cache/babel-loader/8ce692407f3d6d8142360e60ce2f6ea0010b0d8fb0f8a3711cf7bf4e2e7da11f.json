{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dbana\\\\crittertrack-frontend-app\\\\src\\\\app.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { LogOut, Cat, UserPlus, LogIn, ChevronLeft } from 'lucide-react';\n\n// --- Global Constants ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = '/api'; // Proxied to http://localhost:8080 by package.json\n\n// --- Helper Components ---\n\n// Simple message box to replace alerts and confirmation prompts\nconst ModalMessage = ({\n  title,\n  message,\n  onClose\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-bold text-gray-800 mb-3\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-6\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg transition duration-150 shadow-md\",\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 3\n}, this);\n\n// --- 1. Authentication/Registration Components ---\n_c = ModalMessage;\nconst AuthForm = ({\n  isRegister,\n  setToken,\n  setIsRegisterView,\n  setShowModal,\n  setModalMessage\n}) => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [personalName, setPersonalName] = useState('');\n  const [breederName, setBreederName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const endpoint = isRegister ? `${API_BASE_URL}/users/register` : `${API_BASE_URL}/users/login`;\n    const data = isRegister ? {\n      email,\n      password,\n      personalName,\n      breederName,\n      showBreederName: !!breederName\n    } : {\n      email,\n      password\n    };\n    try {\n      const response = await axios.post(endpoint, data);\n      if (isRegister) {\n        // Registration successful logic\n        setModalMessage({\n          title: 'Registration Successful!',\n          message: 'Your account has been created. Please log in now to access your dashboard.'\n        });\n        setShowModal(true);\n        // Clear form and switch back to Login view\n        setEmail('');\n        setPassword('');\n        setPersonalName('');\n        setBreederName('');\n        setIsRegisterView(false); // Switch to login view after registration\n      } else {\n        var _response$data;\n        // Login successful logic\n        const token = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.token; // Added optional chaining for safer access\n        if (token) {\n          localStorage.setItem('userToken', token);\n          setToken(token); // This is the line that triggers the dashboard view!\n          // Clear credentials after success\n          setEmail('');\n          setPassword('');\n        } else {\n          // Handle unexpected successful response without token\n          throw new Error(\"Login succeeded but no token was returned by the server. Check backend response format.\");\n        }\n      }\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error('Auth Error:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n      // Fallback message for network or unexpected error\n      const message = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'A network error occurred or the backend is unreachable.';\n      setModalMessage({\n        title: isRegister ? 'Registration Failed' : 'Login Failed',\n        message: message\n      });\n      setShowModal(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl border border-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-extrabold text-gray-800 text-center mb-6\",\n      children: isRegister ? 'Register Account' : 'Sign In'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true,\n        className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), isRegister && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Your Personal Name\",\n          value: personalName,\n          onChange: e => setPersonalName(e.target.value),\n          required: true,\n          className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Breeder Name (Optional)\",\n          value: breederName,\n          onChange: e => setBreederName(e.target.value),\n          className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2.5 rounded-lg transition duration-150 shadow-md disabled:opacity-50 flex items-center justify-center\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"animate-spin h-5 w-5 mr-3 text-white\",\n          viewBox: \"0 0 24 24\",\n          children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n            className: \"opacity-25\",\n            cx: \"12\",\n            cy: \"12\",\n            r: \"10\",\n            stroke: \"currentColor\",\n            strokeWidth: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            className: \"opacity-75\",\n            fill: \"currentColor\",\n            d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [isRegister ? /*#__PURE__*/_jsxDEV(UserPlus, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(LogIn, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 71\n          }, this), isRegister ? 'Create Account' : 'Sign In']\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n// --- 2. Dashboard Component (Placeholder) ---\n_s(AuthForm, \"/gYWiY4U68QnV21P+l5vDOW2YxM=\");\n_c2 = AuthForm;\nconst Dashboard = ({\n  onLogout\n}) => {\n  _s2();\n  // This will eventually fetch and display user's animals and litters\n  const [view, setView] = useState('list'); // 'list' or 'add'\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const token = localStorage.getItem('userToken');\n  useEffect(() => {\n    // This is the protected fetch that requires the token.\n    const fetchUserData = async () => {\n      if (!token) {\n        setError(\"Missing authentication token.\");\n        setLoading(false);\n        return;\n      }\n      try {\n        setLoading(true);\n        // We are using /api/animals now, which is a protected route.\n        const response = await axios.get(`${API_BASE_URL}/animals`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setData(response.data); // This data will be the list of animals\n        setError(null);\n      } catch (err) {\n        var _err$response3, _err$response4;\n        console.error(\"Dashboard Fetch Error:\", ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || err);\n        if (((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.status) === 401) {\n          setError(\"Session expired or token invalid. Please log in again.\");\n          onLogout();\n        } else {\n          var _err$response5, _err$response5$data;\n          // Note: If the database is empty, /api/animals might return an empty array, which is fine.\n          // This error is for unexpected status codes or network issues.\n          setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || 'Failed to load dashboard data.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUserData();\n  }, [token, onLogout]); // Re-fetch if token changes\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center p-8\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl text-indigo-500\",\n      children: \"Loading Dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 56\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-red-100 border border-red-400 text-red-700 p-4 rounded-lg shadow-md max-w-lg mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-bold\",\n      children: \"Error Loading Data:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onLogout,\n      className: \"mt-4 flex items-center text-sm bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-full transition duration-150 shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(LogOut, {\n        size: 16,\n        className: \"mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), \" Force Log Out\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full max-w-6xl p-6 bg-white rounded-xl shadow-2xl border border-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center border-b pb-4 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-gray-800 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Cat, {\n          size: 24,\n          className: \"mr-3 text-indigo-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), \"My Critter Registry\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        className: \"flex items-center text-sm bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-full transition duration-150 shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          size: 16,\n          className: \"mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), \" Log Out\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 mb-6\",\n      children: \"Welcome! You are successfully connected to the backend API.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold text-indigo-600 mb-4\",\n        children: [data === null || data === void 0 ? void 0 : data.length, \" Animals Registered (Placeholder Data)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-3\",\n        children: data && data.length > 0 ? data.map(animal => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"bg-gray-50 p-3 rounded-lg border border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-gray-700\",\n            children: animal.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-500 ml-3\",\n            children: [\"(\", animal.gender, \", ID: \", animal.id_public, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this)]\n        }, animal._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 italic\",\n          children: \"You haven't added any animals yet. Time to register your first critter!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 5\n  }, this);\n};\n\n// --- 3. Main App Component (Routing and State) ---\n_s2(Dashboard, \"tNLWMUmtbNMQKDMZib670qTNehQ=\");\n_c3 = Dashboard;\nconst App = () => {\n  _s3();\n  const [userToken, setUserToken] = useState(localStorage.getItem('userToken'));\n  // Use state to track the current view between login/register\n  const [isRegisterView, setIsRegisterView] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [modalMessage, setModalMessage] = useState({\n    title: '',\n    message: ''\n  });\n\n  // Handle token setting (used by AuthForm on successful login)\n  const handleSetToken = token => {\n    setUserToken(token);\n    // When the token is set, it automatically triggers the Dashboard view\n  };\n\n  // Handle logout\n  const handleLogout = () => {\n    localStorage.removeItem('userToken');\n    setUserToken(null);\n    setIsRegisterView(false); // Default to login view after logout\n  };\n  const renderAuthContent = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center\",\n    children: [isRegisterView ? /*#__PURE__*/_jsxDEV(AuthForm, {\n      isRegister: true,\n      setToken: handleSetToken,\n      setIsRegisterView: setIsRegisterView // Pass setter to switch to login on success\n      ,\n      setShowModal: setShowModal,\n      setModalMessage: setModalMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(AuthForm, {\n      isRegister: false,\n      setToken: handleSetToken,\n      setIsRegisterView: setIsRegisterView,\n      setShowModal: setShowModal,\n      setModalMessage: setModalMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsRegisterView(!isRegisterView),\n      className: \"mt-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\",\n      children: isRegisterView ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n          size: 16,\n          className: \"mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), \" Back to Login\"]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n          size: 16,\n          className: \"mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), \" Need an Account? Register Here\"]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6 flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"py-8 w-full max-w-6xl text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-5xl font-extrabold text-gray-800 tracking-tight\",\n        children: \"CritterTrack Pedigree App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-gray-500 mt-2\",\n        children: userToken ? 'Welcome back!' : 'Please sign in or register to continue.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-grow p-4 w-full flex justify-center\",\n      children: userToken ? /*#__PURE__*/_jsxDEV(Dashboard, {\n        onLogout: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this) : renderAuthContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"py-4 text-sm text-gray-400 w-full text-center\",\n      children: \"\\xA9 2024 CritterTrack Development\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(ModalMessage, {\n      title: modalMessage.title,\n      message: modalMessage.message,\n      onClose: () => setShowModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n_s3(App, \"Y/1h+AspzFca9G6ted/mvvLL1Yo=\");\n_c4 = App;\nexport default App;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ModalMessage\");\n$RefreshReg$(_c2, \"AuthForm\");\n$RefreshReg$(_c3, \"Dashboard\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","LogOut","Cat","UserPlus","LogIn","ChevronLeft","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","ModalMessage","title","message","onClose","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","AuthForm","isRegister","setToken","setIsRegisterView","setShowModal","setModalMessage","_s","email","setEmail","password","setPassword","personalName","setPersonalName","breederName","setBreederName","loading","setLoading","handleSubmit","e","preventDefault","endpoint","data","showBreederName","response","post","_response$data","token","localStorage","setItem","Error","err","_err$response","_err$response2","_err$response2$data","console","error","onSubmit","type","placeholder","value","onChange","target","required","disabled","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","size","_c2","Dashboard","onLogout","_s2","view","setView","setData","setError","getItem","fetchUserData","get","headers","Authorization","_err$response3","_err$response4","status","_err$response5","_err$response5$data","length","map","animal","name","gender","id_public","_id","_c3","App","_s3","userToken","setUserToken","isRegisterView","showModal","modalMessage","handleSetToken","handleLogout","removeItem","renderAuthContent","_c4","$RefreshReg$"],"sources":["C:/Users/dbana/crittertrack-frontend-app/src/app.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { LogOut, Cat, UserPlus, LogIn, ChevronLeft } from 'lucide-react';\r\n\r\n// --- Global Constants ---\r\nconst API_BASE_URL = '/api'; // Proxied to http://localhost:8080 by package.json\r\n\r\n// --- Helper Components ---\r\n\r\n// Simple message box to replace alerts and confirmation prompts\r\nconst ModalMessage = ({ title, message, onClose }) => (\r\n  <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50\">\r\n    <div className=\"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm\">\r\n      <h3 className=\"text-xl font-bold text-gray-800 mb-3\">{title}</h3>\r\n      <p className=\"text-gray-600 mb-6\">{message}</p>\r\n      <button \r\n        onClick={onClose} \r\n        className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg transition duration-150 shadow-md\"\r\n      >\r\n        Close\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// --- 1. Authentication/Registration Components ---\r\n\r\nconst AuthForm = ({ isRegister, setToken, setIsRegisterView, setShowModal, setModalMessage }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [personalName, setPersonalName] = useState('');\r\n  const [breederName, setBreederName] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const endpoint = isRegister ? `${API_BASE_URL}/users/register` : `${API_BASE_URL}/users/login`;\r\n    const data = isRegister \r\n      ? { email, password, personalName, breederName, showBreederName: !!breederName }\r\n      : { email, password };\r\n\r\n    try {\r\n      const response = await axios.post(endpoint, data);\r\n      \r\n      if (isRegister) {\r\n        // Registration successful logic\r\n        setModalMessage({ \r\n          title: 'Registration Successful!', \r\n          message: 'Your account has been created. Please log in now to access your dashboard.' \r\n        });\r\n        setShowModal(true);\r\n        // Clear form and switch back to Login view\r\n        setEmail('');\r\n        setPassword('');\r\n        setPersonalName('');\r\n        setBreederName('');\r\n        setIsRegisterView(false); // Switch to login view after registration\r\n        \r\n      } else {\r\n        // Login successful logic\r\n        const token = response.data?.token; // Added optional chaining for safer access\r\n        if (token) {\r\n            localStorage.setItem('userToken', token);\r\n            setToken(token); // This is the line that triggers the dashboard view!\r\n            // Clear credentials after success\r\n            setEmail('');\r\n            setPassword('');\r\n        } else {\r\n             // Handle unexpected successful response without token\r\n             throw new Error(\"Login succeeded but no token was returned by the server. Check backend response format.\");\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Auth Error:', err.response?.data || err);\r\n      // Fallback message for network or unexpected error\r\n      const message = err.response?.data?.message || 'A network error occurred or the backend is unreachable.';\r\n      \r\n      setModalMessage({ \r\n        title: isRegister ? 'Registration Failed' : 'Login Failed', \r\n        message: message \r\n      });\r\n      setShowModal(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl border border-indigo-100\">\r\n      <h2 className=\"text-3xl font-extrabold text-gray-800 text-center mb-6\">\r\n        {isRegister ? 'Register Account' : 'Sign In'}\r\n      </h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input \r\n          type=\"email\" \r\n          placeholder=\"Email\" \r\n          value={email} \r\n          onChange={(e) => setEmail(e.target.value)} \r\n          required \r\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n        />\r\n        <input \r\n          type=\"password\" \r\n          placeholder=\"Password\" \r\n          value={password} \r\n          onChange={(e) => setPassword(e.target.value)} \r\n          required \r\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n        />\r\n\r\n        {isRegister && (\r\n          <>\r\n            <input \r\n              type=\"text\" \r\n              placeholder=\"Your Personal Name\" \r\n              value={personalName} \r\n              onChange={(e) => setPersonalName(e.target.value)} \r\n              required \r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n            />\r\n            <input \r\n              type=\"text\" \r\n              placeholder=\"Breeder Name (Optional)\" \r\n              value={breederName} \r\n              onChange={(e) => setBreederName(e.target.value)} \r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\r\n            />\r\n          </>\r\n        )}\r\n\r\n        <button \r\n          type=\"submit\" \r\n          disabled={loading}\r\n          className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2.5 rounded-lg transition duration-150 shadow-md disabled:opacity-50 flex items-center justify-center\"\r\n        >\r\n          {loading ? (\r\n            <svg className=\"animate-spin h-5 w-5 mr-3 text-white\" viewBox=\"0 0 24 24\">\r\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n            </svg>\r\n          ) : (\r\n            <>\r\n              {isRegister ? <UserPlus size={18} className=\"mr-2\" /> : <LogIn size={18} className=\"mr-2\" />}\r\n              {isRegister ? 'Create Account' : 'Sign In'}\r\n            </>\r\n          )}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- 2. Dashboard Component (Placeholder) ---\r\n\r\nconst Dashboard = ({ onLogout }) => {\r\n  // This will eventually fetch and display user's animals and litters\r\n  const [view, setView] = useState('list'); // 'list' or 'add'\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const token = localStorage.getItem('userToken');\r\n\r\n  useEffect(() => {\r\n    // This is the protected fetch that requires the token.\r\n    const fetchUserData = async () => {\r\n      if (!token) {\r\n        setError(\"Missing authentication token.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        // We are using /api/animals now, which is a protected route.\r\n        const response = await axios.get(`${API_BASE_URL}/animals`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        setData(response.data); // This data will be the list of animals\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error(\"Dashboard Fetch Error:\", err.response?.data || err);\r\n        if (err.response?.status === 401) {\r\n            setError(\"Session expired or token invalid. Please log in again.\");\r\n            onLogout();\r\n        } else {\r\n            // Note: If the database is empty, /api/animals might return an empty array, which is fine.\r\n            // This error is for unexpected status codes or network issues.\r\n            setError(err.response?.data?.message || 'Failed to load dashboard data.');\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [token, onLogout]); // Re-fetch if token changes\r\n\r\n  if (loading) return <div className=\"text-center p-8\"><p className=\"text-xl text-indigo-500\">Loading Dashboard...</p></div>;\r\n  \r\n  if (error) return (\r\n    <div className=\"bg-red-100 border border-red-400 text-red-700 p-4 rounded-lg shadow-md max-w-lg mx-auto\">\r\n      <p className=\"font-bold\">Error Loading Data:</p>\r\n      <p>{error}</p>\r\n      <button \r\n        onClick={onLogout}\r\n        className=\"mt-4 flex items-center text-sm bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-full transition duration-150 shadow-md\"\r\n      >\r\n        <LogOut size={16} className=\"mr-2\" /> Force Log Out\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"w-full max-w-6xl p-6 bg-white rounded-xl shadow-2xl border border-indigo-100\">\r\n      <div className=\"flex justify-between items-center border-b pb-4 mb-4\">\r\n        <h2 className=\"text-3xl font-bold text-gray-800 flex items-center\">\r\n            <Cat size={24} className=\"mr-3 text-indigo-600\" />\r\n            My Critter Registry\r\n        </h2>\r\n        <button \r\n          onClick={onLogout}\r\n          className=\"flex items-center text-sm bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-full transition duration-150 shadow-md\"\r\n        >\r\n          <LogOut size={16} className=\"mr-2\" /> Log Out\r\n        </button>\r\n      </div>\r\n\r\n      <p className=\"text-gray-500 mb-6\">\r\n        Welcome! You are successfully connected to the backend API.\r\n      </p>\r\n\r\n      {/* Placeholder for Animal List */}\r\n      <div className=\"mt-4\">\r\n        <h3 className=\"text-2xl font-semibold text-indigo-600 mb-4\">\r\n            {data?.length} Animals Registered (Placeholder Data)\r\n        </h3>\r\n        <ul className=\"space-y-3\">\r\n          {data && data.length > 0 ? (\r\n            data.map((animal) => (\r\n              <li key={animal._id} className=\"bg-gray-50 p-3 rounded-lg border border-gray-200\">\r\n                <span className=\"font-medium text-gray-700\">{animal.name}</span> \r\n                <span className=\"text-sm text-gray-500 ml-3\">({animal.gender}, ID: {animal.id_public})</span>\r\n              </li>\r\n            ))\r\n          ) : (\r\n            <p className=\"text-gray-500 italic\">You haven't added any animals yet. Time to register your first critter!</p>\r\n          )}\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- 3. Main App Component (Routing and State) ---\r\n\r\nconst App = () => {\r\n  const [userToken, setUserToken] = useState(localStorage.getItem('userToken'));\r\n  // Use state to track the current view between login/register\r\n  const [isRegisterView, setIsRegisterView] = useState(false); \r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalMessage, setModalMessage] = useState({ title: '', message: '' });\r\n\r\n  // Handle token setting (used by AuthForm on successful login)\r\n  const handleSetToken = (token) => {\r\n    setUserToken(token);\r\n    // When the token is set, it automatically triggers the Dashboard view\r\n  };\r\n\r\n  // Handle logout\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('userToken');\r\n    setUserToken(null);\r\n    setIsRegisterView(false); // Default to login view after logout\r\n  };\r\n\r\n  const renderAuthContent = () => (\r\n    <div className=\"flex flex-col items-center\">\r\n      {isRegisterView ? (\r\n        <AuthForm \r\n          isRegister={true} \r\n          setToken={handleSetToken} \r\n          setIsRegisterView={setIsRegisterView} // Pass setter to switch to login on success\r\n          setShowModal={setShowModal}\r\n          setModalMessage={setModalMessage}\r\n        />\r\n      ) : (\r\n        <AuthForm \r\n          isRegister={false} \r\n          setToken={handleSetToken} \r\n          setIsRegisterView={setIsRegisterView}\r\n          setShowModal={setShowModal}\r\n          setModalMessage={setModalMessage}\r\n        />\r\n      )}\r\n      \r\n      <button \r\n        onClick={() => setIsRegisterView(!isRegisterView)}\r\n        className=\"mt-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\"\r\n      >\r\n        {isRegisterView ? \r\n          <><ChevronLeft size={16} className=\"mr-1\" /> Back to Login</> \r\n          : \r\n          <><UserPlus size={16} className=\"mr-1\" /> Need an Account? Register Here</>\r\n        }\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-6 flex flex-col items-center\">\r\n      <header className=\"py-8 w-full max-w-6xl text-center\">\r\n        <h1 className=\"text-5xl font-extrabold text-gray-800 tracking-tight\">\r\n          CritterTrack Pedigree App\r\n        </h1>\r\n        <p className=\"text-lg text-gray-500 mt-2\">\r\n          {userToken ? 'Welcome back!' : 'Please sign in or register to continue.'}\r\n        </p>\r\n      </header>\r\n\r\n      <main className=\"flex-grow p-4 w-full flex justify-center\">\r\n        {userToken ? (\r\n          <Dashboard onLogout={handleLogout} />\r\n        ) : (\r\n          renderAuthContent()\r\n        )}\r\n      </main>\r\n      \r\n      <footer className=\"py-4 text-sm text-gray-400 w-full text-center\">\r\n        &copy; 2024 CritterTrack Development\r\n      </footer>\r\n\r\n      {showModal && (\r\n        <ModalMessage \r\n          title={modalMessage.title} \r\n          message={modalMessage.message} \r\n          onClose={() => setShowModal(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}